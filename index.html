<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è¡Œç¨‹è¡¨</title>
<style>
:root{
  --time-w:80px;
  --tl-w:40px;
  --accent:#2a7f59;
  --muted:#666;
  --card:#fff;
}
body{font-family: "Noto Sans JP", Arial, sans-serif; background:#f8f9fa; margin:0;padding:24px;}
h1{color:var(--accent);margin:0 0 12px;}
.schedule-wrapper{position:relative;}
  .schedule{display:grid;grid-template-columns: var(--time-w) repeat(5,1fr); gap:10px; align-items:start;}
.header{font-weight:700;text-align:center;background:var(--accent);color:#fff;padding:8px;border-radius:6px;}
.time{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.95rem;color:var(--accent);padding:6px 4px;}
.time .arrive{font-weight:700;}
.time .depart{font-size:0.85rem;color:var(--muted);}
/* vertical continuous line */
.schedule-wrapper::before{
  content:''; position:absolute;
  left: calc(var(--time-w) + (var(--tl-w)/2) - 2px);
  top: 0; bottom: 0;
  width:4px; background:var(--accent); border-radius:4px; opacity:0.18;
  pointer-events:none;
  z-index:0;
}
.tl-cell{position:relative; width:100%; height:48px; display:flex; align-items:center; justify-content:center; z-index:2;}
.marker{position:relative; width:16px; height:16px; border-radius:50%; background:#fff; border:4px solid var(--accent); box-sizing:content-box;}
.segment{position:absolute; left:50%; transform:translateX(-50%); top:0; bottom:0; width:8px; background:transparent; cursor:default;}
.segment::after{ content: attr(data-info); position:absolute; left:calc(100% + 8px); top:50%; transform:translateY(-50%); background: rgba(0,0,0,0.85); color:#fff; padding:6px 8px; border-radius:6px; white-space:nowrap; font-size:13px; opacity:0; pointer-events:none; transition:opacity .12s; z-index:50;}
.segment:hover::after{ opacity:1; }
/* activity cells */
.activity{background:var(--card); border-radius:8px; padding:8px; box-shadow:0 2px 6px rgba(0,0,0,0.08); text-align:center; z-index:1; font-size:0.95rem;}
.empty{background:transparent; box-shadow:none; height:48px;}
/* ensure grid rows consistent */
.schedule > .time, .schedule > .tl-cell, .schedule > .activity, .schedule > .empty, .schedule > .header{min-height:48px;}
/* responsive */
@media(max-width:800px){
  :root{ --time-w:70px; --tl-w:36px;}
  .schedule{grid-template-columns: var(--time-w) var(--tl-w) repeat(5, 1fr);}
  .segment::after{ font-size:12px;}
}
.side-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 200px;
  height: 100vh;
  background: #fff;
  box-shadow: 2px 0 8px rgba(0,0,0,0.08);
  transform: translateX(-220px);
  transition: transform 0.2s;
  z-index: 999;
  padding-top: 60px;
}
.side-menu.open {
  transform: translateX(0);
}
#menu-toggle {
  background: #2a7f59;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 1.5rem;
  padding: 8px 16px;
  cursor: pointer;
}
@media (min-width: 800px) {
  .side-menu {
    position: static;
    transform: none;
    box-shadow: none;
    height: auto;
    width: auto;
    padding-top: 0;
  }
  #menu-toggle {
    display: none;
  }
}
</style>
<link rel="stylesheet" href="style_column_highlight.css">
</head>
<body>
<button id="menu-toggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹é–‰" style="position:fixed;top:24px;left:24px;z-index:1000;">â˜°</button>
<nav class="side-menu" id="side-menu">
  <ul>
    <li><a href="index.html">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a></li>
    <li><a href="precost.html">äº‹å‰çµŒè²»</a></li>
    <li><a href="cost.html">è¿½åŠ çµŒè²»è¨ˆç®—</a></li>
    <li><a href="bring.html">æŒã¡ç‰©ãƒªã‚¹ãƒˆ</a></li>
  </ul>
</nav>
<h1>è¡Œç¨‹è¡¨</h1>
<div class="schedule-wrapper">
  <div class="schedule">
  <!-- SVG for cell-to-cell lines -->
  <svg id="cell-lines" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;"></svg>
  <div></div>
  <div class="header">ğŸ¦Œ</div>
    <div class="header">ğŸ°</div>
    <div class="header">ğŸŒ¸</div>
    <div class="header">ğŸ¦–</div>
    <div class="header">â˜•</div>

  <div class="time"><div class="arrive">-</div><div class="depart">5:00</div></div>
    <div class="activity" data-cols="2" data-text="ãƒ‘ãƒƒãƒ‘ãƒ©è‡ªå®…" style="grid-column: span 2;">ãƒ‘ãƒƒãƒ‘ãƒ©è‡ªå®…</div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">5:15</div><div class="depart">5:17</div></div>
    <div class="activity" data-cols="3" data-text="ãƒ”ã‚¢ã‚´ ãƒ© ãƒ•ãƒ¼ã‚ºã‚³ã‚¢é»’å·åº—" style="grid-column: span 3;">ãƒ”ã‚¢ã‚´ ãƒ© ãƒ•ãƒ¼ã‚ºã‚³ã‚¢é»’å·åº—</div>
    <div class="empty"></div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">6:00</div><div class="depart">6:02</div></div>
    <div class="activity" data-cols="4" data-text="ç·’å·é§…" style="grid-column: span 4;">ç·’å·é§…</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">6:45</div><div class="depart">7:00</div></div>
    <div class="activity" data-cols="4" data-text="å¸«å´æ¸¯" style="grid-column: span 4;">å¸«å´æ¸¯</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">7:10</div><div class="depart">-</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰" style="grid-column: span 4;">ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">-</div><div class="depart">8:44</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰" style="grid-column: span 4;">ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰</div>
    <div class="activity" data-cols="1" data-text="ä¸‡å ´å¤§æ©‹" style="grid-column: span 1;">ä¸‡å ´å¤§æ©‹</div>

  <div class="time"><div class="arrive">8:50</div><div class="depart">8:59</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰" style="grid-column: span 4;">ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰</div>
    <div class="activity" data-cols="1" data-text="å²©å¡šé§…" style="grid-column: span 1;">å²©å¡šé§…</div>

  <div class="time"><div class="arrive">9:07</div><div class="depart">9:26</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰" style="grid-column: span 4;">ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰</div>
    <div class="activity" data-cols="1" data-text="åå¤å±‹é§…" style="grid-column: span 1;">åå¤å±‹é§…</div>

  <div class="time"><div class="arrive">10:21</div><div class="depart">11:05</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰" style="grid-column: span 4;">ç¯ å³¶ï¼šé‡£ã‚Šï¼ˆ3æ™‚é–“äºˆå®šï¼‰</div>
    <div class="activity" data-cols="1" data-text="æ²³å’Œé§…/æ²³å’Œæ¸¯" style="grid-column: span 1;">æ²³å’Œé§…/æ²³å’Œæ¸¯</div>

  <div class="time"><div class="arrive">11:05</div><div class="depart">11:30</div></div>
    <div class="activity" data-cols="1" data-text="ç§»å‹•" style="grid-column: span 1;">ç§»å‹•</div>
    <div class="activity" data-cols="3" data-text="ç¯ å³¶ï¼šè‡ªç”±è¡Œå‹•" style="grid-column: span 3;">ç¯ å³¶ï¼šè‡ªç”±è¡Œå‹•</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">11:25</div><div class="depart">14:30</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="æ—¥é–“è³€å³¶[ç€ï¼šè¥¿æ¸¯/ç™ºï¼šæ±æ¸¯]" style="grid-column: span 1;">æ—¥é–“è³€å³¶[ç€ï¼šè¥¿æ¸¯/ç™ºï¼šæ±æ¸¯]</div>

  <div class="time"><div class="arrive">11:40</div><div class="depart">14:30</div></div>
    <div class="activity" data-cols="1" data-text="æ—¥é–“è³€å³¶[ç€ï¼šè¥¿æ¸¯/ç™ºï¼šæ±æ¸¯]" style="grid-column: span 1;">æ—¥é–“è³€å³¶[ç€ï¼šè¥¿æ¸¯/ç™ºï¼šæ±æ¸¯]</div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">14:35</div><div class="depart">16:30</div></div>
    <div class="activity" data-cols="5" data-text="ç¯ å³¶DIEUX TERRACE" style="grid-column: span 5;">ç¯ å³¶DIEUX TERRACE</div>

  <div class="time"><div class="arrive">17:00</div><div class="depart">17:21</div></div>
    <div class="activity" data-cols="4" data-text="Ã—" style="grid-column: span 4;">Ã—</div>
    <div class="activity" data-cols="1" data-text="æ²³å’Œæ¸¯/æ²³å’Œé§…" style="grid-column: span 1;">æ²³å’Œæ¸¯/æ²³å’Œé§…</div>

  <div class="time"><div class="arrive">-</div><div class="depart">16:55</div></div>
    <div class="activity" data-cols="4" data-text="ç¯ å³¶" style="grid-column: span 4;">ç¯ å³¶</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">17:15</div><div class="depart">17:20</div></div>
    <div class="activity" data-cols="4" data-text="å¸«å´æ¸¯" style="grid-column: span 4;">å¸«å´æ¸¯</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">17:40</div><div class="depart">-</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="çŸ¥å¤šåŠç”°é§…" style="grid-column: span 1;">çŸ¥å¤šåŠç”°é§…</div>

  <div class="time"><div class="arrive">18:05</div><div class="depart">19:50</div></div>
    <div class="activity" data-cols="5" data-text="å›è»¢é®¨ é­šå¤ªéƒ" style="grid-column: span 5;">å›è»¢é®¨ é­šå¤ªéƒ</div>

  <div class="time"><div class="arrive">19:55</div><div class="depart">20:02</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="åŠç”°é§…" style="grid-column: span 1;">åŠç”°é§…</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">20:05</div><div class="depart">20:11</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="çŸ¥å¤šåŠç”°é§…" style="grid-column: span 1;">çŸ¥å¤šåŠç”°é§…</div>

  <div class="time"><div class="arrive">20:19</div><div class="depart">-</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="ç·’å·é§…" style="grid-column: span 1;">ç·’å·é§…</div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">20:40</div><div class="depart">20:42</div></div>
    <div class="activity" data-cols="3" data-text="ãƒ”ã‚¢ã‚´ ãƒ© ãƒ•ãƒ¼ã‚ºã‚³ã‚¢é»’å·åº—" style="grid-column: span 3;">ãƒ”ã‚¢ã‚´ ãƒ© ãƒ•ãƒ¼ã‚ºã‚³ã‚¢é»’å·åº—</div>
    <div class="empty"></div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">20:44</div><div class="depart">20:53</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="åå¤å±‹é§…" style="grid-column: span 1;">åå¤å±‹é§…</div>

  <div class="time"><div class="arrive">21:00</div><div class="depart">-</div></div>
    <div class="activity" data-cols="2" data-text="ãƒ‘ãƒƒãƒ‘ãƒ©è‡ªå®…" style="grid-column: span 2;">ãƒ‘ãƒƒãƒ‘ãƒ©è‡ªå®…</div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>

  <div class="time"><div class="arrive">21:02</div><div class="depart">21:07</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="å²©å¡šé§…" style="grid-column: span 1;">å²©å¡šé§…</div>

  <div class="time"><div class="arrive">21:12</div><div class="depart">-</div></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="empty"></div>
    <div class="activity" data-cols="1" data-text="ä¸‡å ´å¤§æ©‹" style="grid-column: span 1;">ä¸‡å ´å¤§æ©‹</div>

  </div>
</div>
<script>
// çœŸä¸‹ã®ã‚»ãƒ«ã‚’ç›´ç·šã§çµã¶
window.addEventListener('DOMContentLoaded', function() {
  const wrapper = document.getElementById('schedule-wrapper') || document.querySelector('.schedule-wrapper');
  const schedule = wrapper.querySelector('.schedule');
  const svg = document.getElementById('cell-lines');
  // ã‚«ãƒ©ãƒ æ•°å–å¾—
  const style = getComputedStyle(schedule);
  const columns = style.gridTemplateColumns.split(' ').length;
  // å„è¡Œã”ã¨ã«ã‚«ãƒ©ãƒ ã‚’åŸ‹ã‚ã‚‹å½¢ã§ã‚»ãƒ«ã‚’é…ç½®
  const cells = Array.from(schedule.children);
  let table = [];
  let row = [];
  let colIdx = 0;
  cells.forEach(cell => {
    let span = 1;
    const spanMatch = (cell.getAttribute('style')||'').match(/grid-column:\s*span\s*(\d+)/);
    if(spanMatch) span = parseInt(spanMatch[1]);
    for(let i=0;i<span;i++){
      row.push(cell);
      colIdx++;
      if(colIdx===columns){
        table.push(row);
        row=[];
        colIdx=0;
      }
    }
  });
  if(row.length>0) table.push(row); // ç«¯æ•°
  // SVGã‚¯ãƒªã‚¢
  svg.innerHTML = '';
  const wrapperRect = wrapper.getBoundingClientRect();
  // å„ã‚«ãƒ©ãƒ ã§ã€çœŸä¸‹ãŒç©ºãªã‚‰ã°ä¸‹æ–¹å‘ã«ç©ºã§ãªã„ã‚»ãƒ«ãŒç¾ã‚Œã‚‹ã¾ã§æ¢ã—ã€æœ€åˆã«è¦‹ã¤ã‹ã£ãŸã‚»ãƒ«ã¨ç·šã‚’çµã¶
  for(let col=0; col<columns; col++){
    for(let row=0; row<table.length-1; row++){
      const cell1 = table[row][col];
      if(!cell1 || (cell1.classList && cell1.classList.contains('empty'))) continue;
      // ä¸‹æ–¹å‘ã«ç©ºã§ãªã„ã‚»ãƒ«ã‚’æ¢ã™
      let nextRow = row + 1;
      let cell2 = null;
      while(nextRow < table.length) {
        const candidate = table[nextRow][col];
        if(candidate && !(candidate.classList && candidate.classList.contains('empty'))){
          cell2 = candidate;
          break;
        }
        nextRow++;
      }
      if(!cell2) continue; // ä¸‹ã«ç©ºã§ãªã„ã‚»ãƒ«ãŒãªã‘ã‚Œã°æç”»ã—ãªã„
      const rect1 = cell1.getBoundingClientRect();
      const rect2 = cell2.getBoundingClientRect();
      const x = rect1.left + rect1.width/2 - wrapperRect.left;
      const y1 = rect1.top + rect1.height/2 - wrapperRect.top;
      const y2 = rect2.top + rect2.height/2 - wrapperRect.top;
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1', x);
      line.setAttribute('y1', y1);
      line.setAttribute('x2', x);
      line.setAttribute('y2', y2);
      line.setAttribute('stroke', '#2a7f59');
      line.setAttribute('stroke-width', '2');
      line.setAttribute('opacity', '0.3');
      svg.appendChild(line);
    }
  }
  // ãƒªã‚µã‚¤ã‚ºæ™‚ã‚‚å†æç”»
  window.addEventListener('resize', () => {
    setTimeout(()=>location.reload(), 100);
  });
});
document.getElementById('menu-toggle').addEventListener('click', function() {
  document.getElementById('side-menu').classList.toggle('open');
});
</script>
</body>
<script src="script_column_highlight.js"></script>
</html>
